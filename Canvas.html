<head>
	<title>Javascript Code Dump By Vatsal Patel</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body onload="mastermind();">
	<div class="head" id="head">Javascript Code Dump By Vatsal Patel</div><br>
	<br>
	<div id="master">
<lable class="Title deleat count" vat-id="1">ID : 1 &amp; Title : Css icons to png or custom cursor draw icons on canvas</lable><textarea class="txt deleat" vat-id="1">window.addEventListener('load', (event) =&gt; {
  CssIcoSvg(document.getElementById("Pensil"),"#000000","icomoon")
});
function CssIcoSvg(elemt,fnt_clr,fnt_family){
  let xx = window.getComputedStyle(elemt, ':before').getPropertyValue('content');
  xx= xx.replace(/['"]/g, '')
   let canvas = document.createElement("canvas");
    canvas.width = 24;
    canvas.height = 24;
    // document.body.appendChild(canvas);
   let ctx = canvas.getContext("2d");
    // ctx.fillStyle = "#000000";
    ctx.fillStyle = fnt_clr;
    // ctx.font = "24px "+family;
    ctx.font = "24px "+fnt_family;
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.fillText(xx, 12, 12);
    var dataURL = canvas.toDataURL('image/png');
    document.body.style.cursor = 'url('+dataURL+') 0 20, auto';
    //0 20 x,y is offset for perfect hotspot( mouse click )
}


//font file load hase toj work karse



// to check it in css
// @font-face {
//     font-family: 'icomoon';
//     src:  url('../fonts/icomoon.eot');
//     src:  url('../fonts/icomoon.eot') format('embedded-opentype'),
//       url('../fonts/icomoon.ttf') format('truetype'),
//       url('../fonts/icomoon.woff') format('woff'),
//       url('../fonts/icomoon.svg#icomoon') format('svg');
//     font-weight: normal;
//     font-style: normal;
//     font-display: block;
//   }</textarea><lable class="Title deleat count" vat-id="2">ID : 2 &amp; Title : get pixel colour from canvas</lable><textarea class="txt deleat" vat-id="2">function getpixelcolour(x, y,c2) {//x,y must be int,...
  let ctx2 = c2.getContext("2d");
  y = parseInt(y); //mobile touch x,y is float value,so,..
  x = parseInt(x);
  var imgData = ctx2.getImageData(0, 0, c2.width, c2.height);
  var data = imgData.data;

  var index = ((y * (imgData.width * 4)) + (x * 4));
  return {
    r: imgData.data[index],
    g: imgData.data[index + 1],
    b: imgData.data[index + 2],
    a: imgData.data[index + 3]
  };
}</textarea><lable class="Title deleat count" vat-id="3">ID : 3 &amp; Title : Flood fill , Area fill in canvas on x,y pos</lable><textarea class="txt deleat" vat-id="3">// Bucket(Canvas, ctx, Flood_clr,xP,yP);// clr in hax, xp and yp must be int,..
function Bucket(e,t,o,l,r){if(!(this instanceof Bucket))return new Bucket(e,t,o,l,r);var n=this,i=e.getContext("2d");this.canvas=e,t=t||{},this.colour=o,this.tolerance=void 0===t.tolerance||isNaN(""+t.tolerance)?10:t.tolerance,this.fill_tolerance=10,console.log(e.getClientRects()),o=e.getClientRects()[0],t=i.getImageData(0,0,o.width,o.height),o=(e=new Function("x","y","return 4 * (y * "+t.width+" + x)"))(l,r),console.log(l),tolerance_equal(o=t.data.slice(o,o+4),0,n.parsed_colour,n.fill_tolerance)||(flood_fill(t.data,e,{x:l,y:r},n.parsed_colour,o,n.tolerance,t.width,t.height),i.putImageData(t,0,0))}function tolerance_equal(e,t,o,l){var r=o.length,n=t+r;for(l=l||0;n--&amp;&amp;r--;)if(Math.abs(e[n]-o[r])&gt;l)return!1;return!0}function flood_fill(e,t,o,l,r,n,i,a){for(var c,s,u,f,_,d,p,h=[o],g={},y=flood_fill.steps;o=h.pop();)if(tolerance_equal(e,f=t(s=o.x,u=o.y),r,n))for(_=flood_fill.fill_ways;_--;)_&lt;4&amp;&amp;(e[f+_]=l[_]),c=(d=s+y[_][0])+","+(p=u+y[_][1]),d&lt;0||p&lt;0||i&lt;=d||a&lt;=p||g[c]||(h.push({x:d,y:p}),g[c]=!0)}Object.defineProperty(Bucket.prototype,"colour",{get:function(){return this.__colour},set:function(e){var t=Bucket.__parse_colour_rgx.exec(e||"");t?(this.__colour=e,this.__parsed_colour=t.slice(1).map(function(e){return e=parseInt(e,16),isNaN(e)||e&lt;0||255&lt;e?255:e})):window.DEBUG&amp;&amp;console.warn("Invalid colour set: ",e)}}),Object.defineProperty(Bucket.prototype,"parsed_colour",{get:function(){return this.__parsed_colour}}),Bucket.__parse_colour_rgx=/^#?([0-9a-f]{1,2})([0-9a-f]{1,2})([0-9a-f]{1,2})([0-9a-f]{1,2})?$/i,flood_fill.steps=[[1,0],[0,1],[0,-1],[-1,0]],Object.defineProperty(flood_fill,"fill_ways",{get:function(){return flood_fill.steps.length}});

</textarea><lable class="Title deleat count" vat-id="4">ID : 4 &amp; Title : Canvas events boilerplate</lable><textarea class="txt deleat" vat-id="4">var mousedown =false;
var lastEvt =null;

 A_C = document.querySelector("canvas") ;
 A_ctx = A_C.getContext("2d");
 A_C.addEventListener('mousemove', onmousemove, false);
 A_C.addEventListener('mousedown', onmousedown, false);
 A_C.addEventListener('mouseup', onmouseup, false); 
 A_C.addEventListener('touchstart', ontouchstart, false);
 A_C.addEventListener('touchend', ontouchend, false);
 A_C.addEventListener('touchmove', ontouchmove, false);



function onmousedown(n){
n.preventDefault();
let x = n.offsetX;
let y = n.offsetY;
mousedown =true;
console.log(x,y);
}

function ontouchstart(n){
n.preventDefault();
let x = n.targetTouches[0].pageX - A_C.getBoundingClientRect().left;
let y = n.targetTouches[0].pageY - A_C.getBoundingClientRect().top; 
mousedown =true;
lastEvt =n; 
console.log(x,y);
}


function onmouseup(n){
n.preventDefault();
mousedown =false;
let x = n.offsetX;
let y = n.offsetY; 
console.log(x,y);
}

function ontouchend(n){
n.preventDefault();
mousedown =false;
let x =lastEvt.targetTouches[0].pageX - A_C.getBoundingClientRect().left ;
let y =lastEvt.targetTouches[0].pageY - A_C.getBoundingClientRect().top ;
console.log(x,y);
}



function onmousemove(n){
n.preventDefault();
let x = n.offsetX ;
let y = n.offsetY ; 
console.log(x,y);
}

function ontouchmove(n){
n.preventDefault();
let x =  n.targetTouches[0].pageX - A_C.getBoundingClientRect().left;
let y = n.targetTouches[0].pageY - A_C.getBoundingClientRect().top;
lastEvt =n; //used in touch end
console.log(x,y);
}
</textarea><lable class="Title deleat count" vat-id="5">ID : 5 &amp; Title : Canvas image rotate</lable><textarea class="txt deleat" vat-id="5">function rotateImage(degree){
  // var img = document.createElement("img");
img.src = A_C.toDataURL();
    img.onload = function() {
let rad = degree* Math.PI / 180; 
let w,h,x,y;
w = img.width ;
h = img.height ;
let canvasTemp = GetEl("#vatCanvas100");
// let canvasTemp = document.createElement("canvas");
let ctxTemp = canvasTemp.getContext("2d");
let Origin = TranslateXYImgRotate(degree,w,h);
canvasTemp.width = Math.abs(w * Math.cos(rad)) + Math.abs(h * Math.sin(rad));
canvasTemp.height  = Math.abs(w * Math.sin(rad)) + Math.abs(h * Math.cos(rad));
ctxTemp.save();
ctxTemp.translate(Origin[0], Origin[1]);
ctxTemp.rotate(rad);
ctxTemp.drawImage(img, 0,0);
 ctxTemp.restore();
    }
}



function TranslateXYImgRotate(deg, w, h) {// w,h image naturl width hight
  let rad = deg * Math.PI / 180;
  const sin_Height = h * Math.abs(Math.sin(rad))
  const cos_Height = h * Math.abs(Math.cos(rad))
  const cos_Width = w * Math.abs(Math.cos(rad))
  const sin_Width = w * Math.abs(Math.sin(rad))
  let xOrigin, yOrigin;
  let boundaryRad = Math.atan(w / h);
  if (rad &lt; boundaryRad) {
    // debug('case1');
    xOrigin = Math.min(sin_Height, cos_Width);
    yOrigin = 0;
  } else if (rad &lt; Math.PI / 2) {
    // debug('case2');
    xOrigin = Math.max(sin_Height, cos_Width);
    yOrigin = 0;
  } else if (rad &lt; Math.PI / 2 + boundaryRad) {
    // debug('case3');
    xOrigin = width;
    yOrigin = Math.min(cos_Height, sin_Width);
  } else if (rad &lt; Math.PI) {
    // debug('case4');
    xOrigin = width;
    yOrigin = Math.max(cos_Height, sin_Width);
  } else if (rad &lt; Math.PI + boundaryRad) {
    // debug('case5');
    xOrigin = Math.max(sin_Height, cos_Width);
    yOrigin = height;
  } else if (rad &lt; Math.PI / 2 * 3) {
    // debug('case6');
    xOrigin = Math.min(sin_Height, cos_Width);
    yOrigin = height;
  } else if (rad &lt; Math.PI / 2 * 3 + boundaryRad) {
    // debug('case7');
    xOrigin = 0;
    yOrigin = Math.max(cos_Height, sin_Width);
  } else if (rad &lt; Math.PI * 2) {
    // debug('case8');
    xOrigin = 0;
    yOrigin = Math.min(cos_Height, sin_Width);
  }
  return [xOrigin, yOrigin];
}
</textarea><lable class="Title deleat count" vat-id="6">ID : 6 &amp; Title : err: Tainted canvases may not be exported.</lable><textarea class="txt deleat" vat-id="6"> //this err generated when you call toDataUrl();

image.src = "https://images.pexels.com/photos/248797/pexels-photo-248797.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=1&amp;w=500"; 
image.crossOrigin = "Anonymous";// this will solve err

//but if you draw local image ,it will throw another err,
so try to use base64 image rather than local image!!!
</textarea><lable class="Title deleat count" vat-id="7">ID : 7 &amp; Title : bug :Canvas Draw image Quality loss</lable><textarea class="txt deleat" vat-id="7">canvas.setAttribute('height', canvas.getBoundingClientRect().height);
  canvas.setAttribute('width', canvas.getBoundingClientRect().width);

//set height and width attribute to canvas elem</textarea></div><br>
	<br>
	<textarea class="sub subover" id="code0" placeholder="ID"></textarea> 
	<textarea class="sub subover" id="code1" placeholder="Title"></textarea> <br>
	<textarea class="sub subover" id="code2" placeholder="code"></textarea><br>
	<a href="javascript:runner()" id="btn">Submit</a> <a href="javascript:deleat()" id="btn">Delete</a> <a href="javascript:down()" id="btn">Download</a> 
	<textarea class="sub subover subover1" id="code3">Number of ID : 7</textarea> 
	<br>
	<script type="text/javascript" src="main.js"></script></body>